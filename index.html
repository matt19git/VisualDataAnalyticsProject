<html>

<head>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    .gridlines line {
      stroke: #bbb;
    }

    .gridlines .domain {
      stroke: none;
    }

    #graph1 {
      padding-left: 25px;
    }
  </style>
</head>

<body>
  <p>hi</p>
  <p id="graph1">
  </p>

  <p id="graph2">
    <svg id="barchart" height="500" width="800" style="margin-top:50px"></svg>
    <script>
      // open streaming_service.csv
      d3.csv("streaming_service.csv").then(data => {
        // filter for each service, by 2021
        const filteredData = data.filter(d =>
          d.date.includes("Jan-2024") && ["Netflix", "Disney+", "Hulu", "HBO Max"].includes(d.service)
        );

        // const servicePrices = {};
        // filteredData.forEach(d => {
        //   servicePrices[d.service] = +d.price; // Keep the latest price encountered
        // });

        // const services = Object.keys(servicePrices);
        // const prices = Object.values(servicePrices);

        // // Set up the SVG
        // const margin = { top: 20, right: 30, bottom: 40, left: 40 };
        // const width = 800 - margin.left - margin.right;
        // const height = 400 - margin.top - margin.bottom;

        // const svg = d3.select("body").append("svg")
        //   .attr("width", width + margin.left + margin.right)
        //   .attr("height", height + margin.top + margin.bottom)
        //   .append("g")
        //   .attr("transform", `translate(${margin.left},${margin.top})`);

        // // Create scales
        // const x = d3.scaleBand()
        //   .domain(services)
        //   .range([0, width])
        //   .padding(0.1);

        // const y = d3.scaleLinear()
        //   .domain([0, d3.max(prices)])
        //   .nice()
        //   .range([height, 0]);

        // // Create axes
        // svg.append("g")
        //   .attr("transform", `translate(0,${height})`)
        //   .call(d3.axisBottom(x));

        // svg.append("g")
        //   .call(d3.axisLeft(y));

        // // Create bars
        // svg.selectAll(".bar")
        //   .data(services)
        //   .enter().append("rect")
        //   .attr("class", "bar")
        //   .attr("x", d => x(d))
        //   .attr("y", d => y(servicePrices[d]))
        //   .attr("width", x.bandwidth())
        //   .attr("height", d => height - y(servicePrices[d]))
        //   .attr("fill", "steelblue");

        // linear transform - create chart axes
        const svg = d3.select("svg#barchart");
        const width = svg.attr("width");
        const height = svg.attr("height");
        const margin = { top: 10, right: 10, bottom: 50, left: 50 };
        const chartWidth = width - margin.left - margin.right;
        const chartHeight = height - margin.top - margin.bottom;
        let chartArea = svg.append("g").attr("id", "points")
          .attr("transform", `translate(${margin.left},${margin.top})`);

        // add bars using rect
      });


    </script>
  </p>
</body>


</html>